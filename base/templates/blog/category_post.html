{% extends '_Blog/client/home_layout.html' %}
{% load blog_tags %}
{% block body %}
<div class="py-16 dark:bg-gray-800">  
    <div class="container m-auto px-6 text-gray-600 md:px-12 xl:px-6">
        <div class="mb-12 space-y-2 text-center">
          <span class="block w-max mx-auto px-3 py-1.5 border border-green-200 rounded-full bg-green-100 text-green-600">Blog</span>
          {% if category|length > 1 %}
          <h2 class="text-2xl text-cyan-900 font-bold md:text-4xl">Just showing post in the category & subcategory of {{category.0.name}}</h2>
          {% else %}
          <h2 class="text-2xl text-cyan-900 font-bold md:text-4xl">Just showing post in the category {{category.0.name}}</h2>
          {% endif %}
          <p class="lg:w-6/12 lg:mx-auto">Quam hic dolore cumque voluptate rerum beatae et quae, tempore sunt, debitis dolorum officia aliquid explicabo? Excepturi, voluptate?</p>
        </div>
        <div class="grid gap-8 lg:grid-cols-2">
            {% for post in posts %}
              <article class="p-6 bg-white rounded-lg border border-gray-200 shadow-md dark:bg-gray-800 dark:border-gray-700">
                  <div class="flex justify-between items-center mb-5 text-gray-500">
                      <span class="bg-blue-100 text-blue-800 text-xs font-medium inline-flex items-center px-2.5 py-0.5 rounded dark:bg-gray-800 dark:text-gray-400">
                          <svg class="mr-1 w-4 h-4" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <rect x="0" fill="none" width="20" height="20"></rect> <g> <path d="M5 7h13v10H2V4h7l2 2H4v9h1V7z"></path> </g> </g></svg>
                          {% if post.category.level > 1 %} {{post.category.get_root}} ... {{post.category}} {% elif post.category.is_root_node %} {{post.category}} {% elif post.category == None %} Not categorized {% else %} {{post.category.get_root}} >> {{post.category}} {% endif %}
                      </span>
                      <span class="bg-gray-100 text-gray-800 text-xs font-medium inline-flex items-center px-2.5 py-0.5 rounded mr-2 dark:bg-gray-700 dark:text-gray-400">
                        <svg aria-hidden="true" class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path></svg>
                        {{ post.date|timesince }} ago
                      </span>
                  </div>
                  <div class="mb-2 overflow-hidden rounded h-64 cursor-pointer">
                    <a href="{% if post.category %} {% url 'Blog:read_post' post.category.slug post.slug %} {% else %} {% url 'Blog:read_post' 'uncategorized' post.slug %} {% endif %}"><img class="m-auto w-full scale-110 transition-all duration-400 hover:scale-95" src="{% if post.cover_photo %} {{ post.cover_photo.url }} {% else %} https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg {% endif %}" alt="Thumbnail" onerror="this.onerror=null;this.src='https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg';"></a>
                  </div>
                  <!-- Post title -->
                  <h2 class="mb-2 text-2xl font-bold tracking-tight whitespace-wrap overflow-hidden text-gray-900 dark:text-white"><a href="{% if post.category %} {% url 'Blog:read_post' post.category.slug post.slug %} {% else %} {% url 'Blog:read_post' 'uncategorized' post.slug %} {% endif %}">{{post.title|striptags}}</a></h2>
                  <p class="mb-5 font-light text-gray-500 dark:text-gray-400">
                    {% if post.description %}
                      {{post.description|html_trunc:255}}
                    {% else %}
                      {{post.content|html_trunc:255}}
                    {% endif %}</p>
                  <div class="flex justify-between items-center">
                      <div class="flex items-center space-x-4">
                        {% if post.author.profile_photo %}
                            <img class="w-7 h-7 rounded-full" src="{{post.author.profile_photo.url}}" alt=" {% if post.author.first_name %} {{post.author.first_name}} {{post.author.last_name}} {% else %} {{ post.author.username }} {% endif %} " />
                        {% else %}
                            <svg width="80" height="80" class="w-7 h-7 rounded-full" data-jdenticon-value="{{post.author.username}}"></svg>
                        {% endif %}
                            <span class="font-medium dark:text-white">
                              {% if post.author.first_name %} {{post.author.first_name}} {{post.author.last_name}} {% else %} {{ post.author.username }} {% endif %} 
                          </span>
                      </div>
                        <a href="{% if post.category %} {% url 'Blog:read_post' post.category.slug post.slug %} {% else %} {% url 'Blog:read_post' 'uncategorized' post.slug %} {% endif %}" class="inline-flex items-center font-medium text-blue-600 dark:text-blue-500 hover:underline">
                            Read in {{post.content|readtime}}ute
                            <svg class="ml-2 w-4 h-4" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                        </a>
                  </div>
              </article>  
            {% endfor %}              
        </div>  
        <!-- End user post -->
    </div>
</div>
  {% endblock %}